<!-- <div class="chatbox" *ngIf="visible">
  <div class="header">
    <span>Assistant</span>
    <button class="close-btn" (click)="close()">Ã—</button>
  </div>
  <div class="messages">
    <div class="user-area"><div class="msg_container"><div class="user-msg">Je nâ€™arrive pas Ã  crÃ©er un compte</div><span class="msg_time time_send">22:00</span></div></div>
    <div class="msg_container"><div class="bot-msg">Lorem ipsum dolor sit amet consectetur adipisicing elit. Atque, enim qui modi voluptatibus expedita, mollitia quam, accusantium eius deleniti similique dolore. Nobis hic, odio voluptate officiis molestiae qui distinctio optio.Lorem ipsum dolor sit amet consectetur adipisicing elit. Atque, enim qui modi voluptatibus expedita, mollitia quam, accusantium eius deleniti similique dolore. Nobis hic, odio voluptate officiis molestiae qui distinctio optio.Lorem ipsum dolor sit amet consectetur adipisicing elit. Atque, enim qui modi voluptatibus expedita, mollitia quam, accusantium eius deleniti similique dolore. Nobis hic, odio voluptate officiis molestiae qui distinctio optio.Lorem ipsum dolor sit amet consectetur adipisicing elit. Atque, enim qui modi voluptatibus expedita, mollitia quam, accusantium eius deleniti similique dolore. Nobis hic, odio voluptate officiis molestiae qui distinctio optio.</div><span class="msg_time">22:00</span></div>
  </div>
  <div class="input-zone">
    <input type="text" placeholder="Tapez votre message ici">
    <button class="send-btn">âž¤</button>
  </div>
</div> -->

<!-- src/app/components/chatbox/chatbox.component.html -->
<div class="chatbox chatbox-exclude-capture" *ngIf="isVisible">
  <div class="header">
    <span>Assistant</span>
    <button class="close-btn" (click)="close()">Ã—</button>
  </div>

  <div class="messages">
    <div *ngFor="let msg of messages" class="message-container" [ngClass]="msg.from === 'user' ? 'user' : 'bot'">
      <div [ngClass]="msg.from === 'user' ? 'user-msg' : 'bot-msg'">
        <!-- Afficher l'image si elle existe -->
        <div *ngIf="msg.image" class="message-image">
          <img [src]="msg.image" alt="Image jointe" class="attached-image">
        </div>
        <div *ngIf="msg.from === 'user'">{{ msg.text }}</div>
        <div *ngIf="msg.from === 'bot'" [innerHTML]="msg.text | markdown"></div>
      </div>
    </div>
  </div>

  <!-- Zone de prÃ©visualisation de l'image -->
  <div *ngIf="selectedImage" class="image-preview">
    <div class="preview-container">
      <img [src]="selectedImage" alt="AperÃ§u" class="preview-image">
      <button class="remove-image" (click)="removeImage()">Ã—</button>
    </div>
  </div>

  <div class="input-zone">
    <input type="text" [(ngModel)]="userInput" placeholder="Tapez votre message ici" (keydown.enter)="send()">
    <button class="image-btn" (click)="triggerImageUpload()" title="Joindre une image">
      ðŸ“Ž
    </button>
    <button class="send-btn" (click)="send()">âž¤</button>
    <!-- Input file cachÃ© -->
    <input #fileInput type="file" accept="image/*" (change)="onImageSelected($event)" style="display: none;">
  </div>
</div>

<!-- Popup de choix d'image -->
<app-image-option-popup *ngIf="showImageOptionPopup" (screenCapture)="onScreenCapture()" (fileUpload)="onFileUpload()"
  (cancel)="onCancelImageOption()">
</app-image-option-popup>